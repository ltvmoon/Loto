/* --- RESET & BASE --- */
body {
    font-family: 'Segoe UI', Tahoma, sans-serif;
    background: #eaeff2;
    color: #333;
    margin: 0;
    padding: 0;
    height: 100vh;
    display: flex;
    flex-direction: column;
}

* {
    box-sizing: border-box;
}

#app {
    width: 100%;
    height: 100%;
    padding: 10px;
    margin: 0;
}

.hidden {
    display: none !important;
}

/* LAYOUT HELPERS */
.container-center {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    width: 100%;
}

/* ADMIN DASHBOARD CARDS */
.card-option {
    background: white;
    width: 200px;
    height: 150px;
    border-radius: 12px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    cursor: pointer;
    transition: 0.3s;
    border: 2px solid transparent;
}

.card-option:hover {
    transform: translateY(-5px);
    border-color: #3498db;
}

.card-option h2 {
    font-size: 1.2em;
    margin-bottom: 5px;
    color: #2c3e50;
}

.card-option p {
    font-size: 0.9em;
    color: #7f8c8d;
}

/* ADMIN TABLE */
table th, table td {
    border-bottom: 1px solid #eee;
}

/* --- LOGIN SCREEN --- */
#login-screen {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    background: white;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    padding: 30px;
    max-width: 600px;
    margin: auto;
    position: relative;
    top: 10vh;
}

.login-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    width: 100%;
    margin-top: 20px;
}

.room-list-container {
    border: 1px solid #ddd;
    border-radius: 8px;
    height: 250px;
    overflow-y: auto;
    background: #f9f9f9;
    padding: 10px;
}

.room-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    background: white;
    border-bottom: 1px solid #eee;
    cursor: pointer;
    transition: 0.2s;
}

.room-item:hover {
    background: #eef2f3;
}

.room-item.full {
    opacity: 0.6;
    cursor: not-allowed;
    background: #ddd;
}

.room-id {
    font-weight: bold;
    color: #2c3e50;
}

.room-count {
    font-size: 0.9em;
    color: #7f8c8d;
}

.btn-create-room {
    background: #27ae60;
    color: white;
    width: 100%;
    margin-top: 10px;
    padding: 12px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
}

/* --- GAME LAYOUT --- */
#game-grid {
    display: grid;
    grid-template-columns: 1fr 2fr 1fr;
    gap: 15px;
    height: 100%;
    align-items: start;
}

@media (max-width: 1200px) {
    #game-grid {
        grid-template-columns: 1fr;
        overflow-y: auto;
    }
    body {
        height: auto;
    }
}

.panel {
    background: white;
    border-radius: 12px;
    padding: 15px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    margin-bottom: 15px;
}

h3, h4 {
    margin-top: 0;
    color: #2c3e50;
    border-bottom: 2px solid #f0f2f5;
    padding-bottom: 10px;
    font-size: 1.1em;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* --- UI ELEMENTS --- */
.user-info-card { text-align: center; }
.avatar-circle { width: 80px; height: 80px; background: #3498db; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2em; margin: 0 auto 10px; font-weight: bold; }
.balance-display { font-size: 1.8em; color: #27ae60; font-weight: 900; margin: 10px 0; display: block; }
.game-info-stats { display: flex; justify-content: space-around; margin-top: 15px; padding-top: 10px; border-top: 1px solid #eee; }
.stat-item strong { display: block; font-size: 1.2em; color: #e67e22; }

#log-area { height: 250px; overflow-y: auto; background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 10px; font-size: 0.9em; margin-bottom: 15px; }
#log-area p { margin: 5px 0; border-bottom: 1px dashed #dee2e6; padding-bottom: 5px; line-height: 1.4; }

#participants-list { max-height: 200px; overflow-y: auto; }
.p-item { padding: 5px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; font-size: 0.9em; align-items: center; }
.p-host { color: #e67e22; font-weight: bold; background: #fdf2e9; padding: 2px 5px; border-radius: 4px; font-size: 0.8em; }
.p-spectator { color: #7f8c8d; font-style: italic; background: #eee; padding: 2px 5px; border-radius: 4px; font-size: 0.8em; }
.p-player { color: #27ae60; font-weight: bold; background: #e8f8f5; padding: 2px 5px; border-radius: 4px; font-size: 0.8em; }

#host-panel { background: linear-gradient(135deg, #2c3e50, #34495e); color: white; text-align: center; }
.host-controls { display: flex; gap: 10px; justify-content: center; align-items: center; flex-wrap: wrap; margin-bottom: 10px; }
.input-secs, .input-price, .input-transfer { width: 80px; padding: 8px; border-radius: 5px; border: none; text-align: center; font-weight: bold; }
.input-price { width: 100px; color: #c0392b; }
.input-transfer { width: 120px; }

#my-tickets-dashboard { background: #e8f8f5; border: 2px dashed #1abc9c; min-height: 150px; text-align: center; }
.my-ticket-wrapper { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; }

.ticket-detail { border: 3px solid #2ecc71; width: 100%; max-width: 320px; border-radius: 8px; overflow: hidden; background: #fff; box-shadow: 0 0 15px rgba(46, 204, 113, 0.2); position: relative; }
.ticket-header { padding: 5px 10px; color: white; display: flex; justify-content: space-between; font-weight: bold; font-size: 0.9em; background: #2ecc71; }
.row { display: grid; grid-template-columns: repeat(9, 1fr); border-bottom: 1px solid #eee; }
.cell { aspect-ratio: 1; border-right: 1px solid #eee; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; user-select: none; cursor: pointer; transition: background-color 0.2s; }
.cell:hover { background: #f0f0f0; }

/* --- TRẠNG THÁI ĐÁNH DẤU (MARKED) --- */
/* Quan trọng: Không set background-color cứng ở đây để JS có thể set đè (theo màu vé) */
.cell.marked {
    color: white !important; /* Chữ màu trắng */
    border-radius: 50%; /* Bo tròn */
    transform: scale(0.9);
    /* Màu nền sẽ do JS thêm vào inline style */
}

/* --- TRẠNG THÁI HIGHLIGHT (Khi số vừa ra) --- */
.cell.highlight {
    /* Manual mode sẽ không bị ảnh hưởng vì JS chặn class này */
    /* Auto mode có thể dùng class này để tạo hiệu ứng nhấp nháy nếu muốn */
/*animation: blink 0.6s infinite alternate;*/
    z-index: 10;
    font-weight: 900;
    color: #c0392b;
}

#pool-area { background: #fff; padding: 15px; }
#pool-grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: 15px; }
@media (max-width: 1400px) { #pool-grid { grid-template-columns: repeat(4, 1fr); } }
@media (max-width: 768px) { #pool-grid { grid-template-columns: repeat(3, 1fr); } }

.ticket-thumb { aspect-ratio: 3/2; background-color: #f8f9fa; border: 2px solid #bdc3c7; border-radius: 8px; cursor: pointer; position: relative; overflow: hidden; transition: all 0.2s; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05); }
.ticket-img { width: 100%; height: 100%; object-fit: contain; padding: 2px; display: block; }
.ticket-thumb:hover { transform: translateY(-5px) scale(1.05); border-color: #3498db; box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15); z-index: 10; }
.ticket-thumb.taken { filter: grayscale(100%) opacity(0.5); pointer-events: none; border-color: #999; }
.ticket-thumb.taken::after { content: "ĐÃ CÓ CHỦ"; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-15deg); font-size: 0.7em; font-weight: bold; color: white; background: red; padding: 2px 5px; border-radius: 3px; white-space: nowrap; z-index: 2; }
.ticket-thumb.selected { display: none; }

#wait-leaderboard { display: flex; flex-direction: column; gap: 5px; margin-bottom: 10px; }
.wait-item { display: flex; justify-content: space-between; align-items: center; padding: 8px; background: #fff3cd; border: 1px solid #ffeeba; border-radius: 5px; color: #856404; font-weight: bold; font-size: 0.9em; }
.wait-badge { background: #dc3545; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8em; }

#win-status-area { max-height: 250px; overflow-y: auto; display: flex; flex-direction: column; gap: 6px; }
.status-card { padding: 8px; border-radius: 5px; font-size: 0.9em; font-weight: bold; display: flex; align-items: center; justify-content: space-between; animation: fadeIn 0.3s ease-out; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
.st-checking { background: #f1c40f; color: #7f8c8d; border-left: 4px solid #f39c12; }
.st-win { background: #2ecc71; color: white; border-left: 4px solid #27ae60; }
.st-fail { background: #e74c3c; color: white; border-left: 4px solid #c0392b; }
.st-auto { background: #3498db; color: white; border-left: 4px solid #2980b9; }

#current-ball-wrapper { text-align: center; background: #fdf2e9; border: 2px solid #e67e22; }
#current-ball { font-size: 5em; font-weight: 900; color: #d35400; line-height: 1; display: block; margin: 10px 0; }
#recent-history-list { font-style: italic; color: #7f8c8d; font-size: 0.95em; min-height: 20px; }
#master-grid { display: grid; grid-template-columns: repeat(10, 1fr); gap: 4px; }
.mb-cell { aspect-ratio: 1; background: #ecf0f1; color: #bdc3c7; display: flex; align-items: center; justify-content: center; border-radius: 4px; font-size: 0.8em; font-weight: bold; }
.mb-cell.active { background: #2c3e50; color: #fff; }
.mb-cell.latest { background: #e74c3c !important; transform: scale(1.1); box-shadow: 0 0 10px rgba(231, 76, 60, 0.5); z-index: 2; border: 2px solid white; }

.btn { padding: 10px 20px; border-radius: 6px; border: none; cursor: pointer; font-weight: bold; font-size: 1em; transition: 0.2s; color: white; }
.btn-primary { background: #3498db; width: 100%; }
.btn-success { background: #27ae60; }
.btn-draw { background: #f1c40f; color: #c0392b; }
.btn-stop { background: #e74c3c; color: white; animation: pulse 1s infinite; }
.btn-reset { background: #34495e; color: white; border: 1px solid rgba(255, 255, 255, 0.2); }
.btn-wait { width: 100%; background: #fd7e14; font-size: 1.3em; padding: 15px; text-transform: uppercase; margin-top: 20px; box-shadow: 0 5px 0 #d35400; color: white; }
.btn-wait:active { transform: translateY(4px); box-shadow: none; }
.btn-disabled { background: #bdc3c7; cursor: not-allowed; transform: none; box-shadow: none; }
.btn-price { background: #8e44ad; }
.game-disabled { opacity: 0.5; pointer-events: none; filter: grayscale(100%); }

@keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }
@keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes blink { from { opacity: 1; } to { opacity: 0.3; } }

#edit-target-username {
text-transform: none !important;
font-weight: bold;
color: #d35400;
}